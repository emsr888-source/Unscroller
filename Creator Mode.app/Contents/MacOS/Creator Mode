#!/bin/bash

# Creator Mode Desktop App Launcher
echo "üöÄ Starting Creator Mode..."

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
APP_DIR="$(dirname "$(dirname "$(dirname "$SCRIPT_DIR")")")"

# Change to the Creator Mode project directory
cd "$APP_DIR"

# Check if backend is running
if ! curl -s http://localhost:3001/api/policy > /dev/null 2>&1; then
    echo "‚ö†Ô∏è  Backend not running. Starting backend first..."
    cd apps/backend
    POLICY_PATH=/Users/onalime/CreatorMode/policy/policy.json PORT=3001 npm run start:dev &
    sleep 8
    cd ../desktop
else
    echo "‚úÖ Backend already running"
    cd apps/desktop
fi

# Start desktop app
echo "üñ•Ô∏è  Starting Creator Mode Desktop App..."
npm run dev
